<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel="stylesheet" href="../style_bootstrap.css">
  <link rel="stylesheet" href="../css/style.css">
  <link href="https://cdn.prod.website-files.com/5efdb54f07a6812bcd95cc65/6773d0fc3013e060f08d7145_favicon.jpg"
    rel="shortcut icon" type="image/x-icon">
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Day 2: Data Manipulation (DML)</title>
  <style>
    code {
      white-space: pre-wrap;
    }

    span.smallcaps {
      font-variant: small-caps;
    }

    span.underline {
      text-decoration: underline;
    }

    div.column {
      display: inline-block;
      vertical-align: top;
      width: 50%;
    }

    div.hanging-indent {
      margin-left: 1.5em;
      text-indent: -1.5em;
    }

    ul.task-list {
      list-style: none;
    }

    pre>code.sourceCode {
      white-space: pre;
      position: relative;
    }

    pre>code.sourceCode>span {
      display: inline-block;
      line-height: 1.25;
    }

    pre>code.sourceCode>span:empty {
      height: 1.2em;
    }

    code.sourceCode>span {
      color: inherit;
      text-decoration: inherit;
    }

    div.sourceCode {
      margin: 1em 0;
    }

    pre.sourceCode {
      margin: 0;
    }

    @media screen {
      div.sourceCode {
        overflow: auto;
      }
    }

    @media print {
      pre>code.sourceCode {
        white-space: pre-wrap;
      }

      pre>code.sourceCode>span {
        text-indent: -5em;
        padding-left: 5em;
      }
    }

    pre.numberSource code {
      counter-reset: source-line 0;
    }

    pre.numberSource code>span {
      position: relative;
      left: -4em;
      counter-increment: source-line;
    }

    pre.numberSource code>span>a:first-child::before {
      content: counter(source-line);
      position: relative;
      left: -1em;
      text-align: right;
      vertical-align: baseline;
      border: none;
      display: inline-block;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -khtml-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      padding: 0 4px;
      width: 4em;
      color: #aaaaaa;
    }

    pre.numberSource {
      margin-left: 3em;
      border-left: 1px solid #aaaaaa;
      padding-left: 4px;
    }

    div.sourceCode {}

    @media screen {
      pre>code.sourceCode>span>a:first-child::before {
        text-decoration: underline;
      }
    }

    code span.al {
      color: #ff0000;
      font-weight: bold;
    }

    /* Alert */
    code span.an {
      color: #60a0b0;
      font-weight: bold;
      font-style: italic;
    }

    /* Annotation */
    code span.at {
      color: #7d9029;
    }

    /* Attribute */
    code span.bn {
      color: #40a070;
    }

    /* BaseN */
    code span.bu {}

    /* BuiltIn */
    code span.cf {
      color: #007020;
      font-weight: bold;
    }

    /* ControlFlow */
    code span.ch {
      color: #4070a0;
    }

    /* Char */
    code span.cn {
      color: #880000;
    }

    /* Constant */
    code span.co {
      color: #60a0b0;
      font-style: italic;
    }

    /* Comment */
    code span.cv {
      color: #60a0b0;
      font-weight: bold;
      font-style: italic;
    }

    /* CommentVar */
    code span.do {
      color: #ba2121;
      font-style: italic;
    }

    /* Documentation */
    code span.dt {
      color: #902000;
    }

    /* DataType */
    code span.dv {
      color: #40a070;
    }

    /* DecVal */
    code span.er {
      color: #ff0000;
      font-weight: bold;
    }

    /* Error */
    code span.ex {}

    /* Extension */
    code span.fl {
      color: #40a070;
    }

    /* Float */
    code span.fu {
      color: #06287e;
    }

    /* Function */
    code span.im {}

    /* Import */
    code span.in {
      color: #60a0b0;
      font-weight: bold;
      font-style: italic;
    }

    /* Information */
    code span.kw {
      color: #007020;
      font-weight: bold;
    }

    /* Keyword */
    code span.op {
      color: #666666;
    }

    /* Operator */
    code span.ot {
      color: #007020;
    }

    /* Other */
    code span.pp {
      color: #bc7a00;
    }

    /* Preprocessor */
    code span.sc {
      color: #4070a0;
    }

    /* SpecialChar */
    code span.ss {
      color: #bb6688;
    }

    /* SpecialString */
    code span.st {
      color: #4070a0;
    }

    /* String */
    code span.va {
      color: #19177c;
    }

    /* Variable */
    code span.vs {
      color: #4070a0;
    }

    /* VerbatimString */
    code span.wa {
      color: #60a0b0;
      font-weight: bold;
      font-style: italic;
    }

    /* Warning */
  </style>
</head>

<body>
  <div class="copy-notification" id="copyNotification">Copied!</div>

  <div id="europeanunion-turkey">
    <img src="../static/eu.png" alt="">
  </div>
  <div id="sanayiteknolojibakan">
    <img src="../static/sanayitek.png" alt="">
  </div>
  <div id="rekabet">
    <img src="../static/rekabet.png" alt="">
  </div>
  <div id="tisk">
    <img src="../static/tisk.png" alt="">
  </div>
  <div id="undp">
    <img src="../static/undp.png" alt="">
  </div>
  <div class="content-container">
    <div class="container">
      <section>
        <h1 id="day-2-data-manipulation">Day 2: Data Manipulation (DML)</h1>
        <h2 id="session-2-data-manipulation-2-hours">Session 1: Data Manipulation (2 hours)</h2>
        <p>This session covers the SQL commands used to add, modify, and remove data from tables: <code>INSERT</code>,
          <code>UPDATE</code>, and <code>DELETE</code>. We will also discuss transaction management, which is crucial
          for
          ensuring data integrity during these operations.
        </p>
      </section>
      <section>
        <h3 id="insert-statements-adding-data">INSERT Statements (Adding Data)</h3>
        <p>The <code>INSERT</code> statement adds new rows (records) to a table.</p>
        <p><strong>Standard SQL Syntax</strong>:</p>
        <ol type="1">
          <li>
            <p><strong>Inserting a Single Row</strong>: Specify the table, the columns to populate, and the
              corresponding
              values.
            <div class="sourceCode" id="cb1" onclick="CopyToClipboard('cb1')">
              <pre
                class="sourceCode sql"><code class="sourceCode sql"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="co">-- Insert one row</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> table_name (column1, column2) <span class="kw">VALUES</span> (value1, value2);</span></code></pre>
            </div>
            </p>
            <ul>
              <li>If providing values for <em>all</em> columns in their defined order, the column list can sometimes be
                omitted, but explicitly listing columns is safer and more readable.</li>
            </ul>
          </li>
          <li>
            <p><strong>Inserting Multiple Rows</strong>: Most databases support inserting multiple rows with a single
              <code>INSERT</code> statement using multiple value tuples.
            <div class="sourceCode" id="cb2" onclick="CopyToClipboard('cb2')">
              <pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a><span class="co">-- Insert multiple rows</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> table_name (column1, column2) <span class="kw">VALUES</span>
(value1a, value2a),
(value1b, value2b),
(value1c, value2c);</span></code></pre>
            </div>
            </p>
          </li>
          <li>
            <p><strong>Inserting from a Query</strong>: Insert rows based on the result of a <code>SELECT</code>
              statement.
            <div class="sourceCode" id="cb03" onclick="CopyToClipboard('cb03')">
              <pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a><span class="co">-- Insert multiple rows</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> table_name (column1, column2)
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true"></a><span class="kw">SELECT</span> source_column1, source_column2     
<span class="kw">FROM</span> source_table     
<span class="kw">WHERE</span> condition;</span></code></pre>
            </div>
            </p>
          </li>
        </ol>
      </section>
      <section>
        <p><strong>Handling Default Values (Standard SQL)</strong>:</p>
        <p>If a column has a default value defined, you can either omit it from the <code>INSERT</code> statement (if
          you
          list columns explicitly) or use the <code>DEFAULT</code> keyword.</p>
        <div class="sourceCode" id="cb04" onclick="CopyToClipboard('cb04')">
          <pre
            class="sourceCode sql"><code class="sourceCode sql"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="co">-- Assuming column3 has a default value</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> table_name (column1, column2) <span class="kw">VALUES</span> (value1, value2); <span class="co">-- Omitting column3</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> table_name (column1, column2, column3) </span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true"></a><span class="kw">VALUES</span> (value1, value2, <span class="kw">DEFAULT</span>); <span class="co">-- Explicitly using DEFAULT</span></span></code></pre>
        </div>
      </section>
      <section>
        <p><strong>Retrieving Generated Values (Syntax Varies)</strong>:</p>
        <p>Often, you need to get the value of an auto-generated key (like an ID) after an insert.</p>
        <ul>
          <li><strong>PostgreSQL/Oracle</strong>: Use the <code>RETURNING</code> clause.
            <div class="sourceCode" id="cb05" onclick="CopyToClipboard('cb05')">
              <pre class="sourceCode sql">
<code><span id="cb1-6"><a href="#cb1-6" aria-hidden="true"></a><span class="co"></span>-- PostgreSQL/Oracle Example</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> products (product_name, price)     
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true"></a><span class="kw">VALUES</span> (<span class="ot">&quot;New Gadget&quot;</span>, <span class="fl">99.99</span>)     
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true"></a><span class="kw">RETURNING</span> product_id;</span></code></pre>
            </div>
          </li>
          <li><strong>SQL Server</strong>: Use the <code>OUTPUT</code> clause.
            <div class="sourceCode" id="cb06" onclick="CopyToClipboard('cb06')">
              <pre class="sourceCode sql">
<code><span id="cb1-10"><a href="#cb1-10" aria-hidden="true"></a><span class="co"></span>-- SQL Server Example</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> products (product_name, price)     
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true"></a><span class="kw">OUTPUT</span> inserted.product_id     
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true"></a><span class="kw">VALUES</span> (<span class="ot">&quot;New Gadget&quot;</span>, <span class="fl">99.99</span>);</span></code></pre>
            </div>
          </li>
          <li><strong>MySQL</strong>: Use the <code>LAST_INSERT_ID()</code> function in a subsequent query (within the
            same session).
            <div class="sourceCode" id="cb07" onclick="CopyToClipboard('cb07')">
              <pre class="sourceCode sql">
<code><span id="cb1-14"><a href="#cb1-14" aria-hidden="true"></a><span class="co"></span>-- MySQL Example</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> products (product_name, price)     
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true"></a><span class="kw">VALUES</span> (<span class="ot">&quot;New Gadget&quot;</span>, <span class="fl">99.99</span>);</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true"></a><span class="kw">SELECT</span> LAST_INSERT_ID();</span></code></pre>
            </div>
          </li>
          <li><strong>Standard SQL</strong>: The <code>IDENTITY()</code> function is defined, but vendor support and
            usage
            vary.</li>
        </ul>
      </section>
      <section>
        <p><strong>Examples (Using Odoo/PostgreSQL Schema)</strong>:</p>
        <div class="sourceCode" id="cb08" onclick="CopyToClipboard('cb08')">
          <pre
            class="sourceCode sql"><code class="sourceCode sql"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a><span class="co">-- Insert a single product category</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> product_category (name, parent_id) <span class="kw">VALUES</span> (<span class="ot">&quot;Wearables&quot;</span>, <span class="dv">1</span>);</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true"></a><span class="co">-- Insert multiple partners</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> res_partner (name, email, customer_rank)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true"></a><span class="kw">VALUES</span> </span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true"></a>    (<span class="ot">&quot;Alice Smith&quot;</span>, <span class="ot">&quot;alice@example.com&quot;</span>, <span class="dv">1</span>),</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true"></a>    (<span class="ot">&quot;Bob Johnson&quot;</span>, <span class="ot">&quot;bob@sample.org&quot;</span>, <span class="dv">1</span>);</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true"></a><span class="co">-- Insert using DEFAULT and RETURNING (PostgreSQL)</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> product_template (name, list_price, <span class="kw">type</span>, categ_id, uom_id, uom_po_id, active)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true"></a><span class="kw">VALUES</span> (<span class="ot">&quot;Basic Widget&quot;</span>, <span class="fl">19.95</span>, <span class="ot">&quot;product&quot;</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="kw">DEFAULT</span>)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true"></a><span class="kw">RETURNING</span> <span class="kw">id</span>, name;</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true"></a><span class="co">-- Insert from a query (create copies of some categories)</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> product_category (name, parent_id)</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true"></a><span class="kw">SELECT</span> name <span class="op">||</span> <span class="ot">&quot; (Backup)&quot;</span>, parent_id</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true"></a><span class="kw">FROM</span> product_category</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true"></a><span class="kw">WHERE</span> <span class="kw">id</span> <span class="op">&lt;</span> <span class="dv">5</span>;</span></code></pre>
        </div>
      </section>
      <section>
        <h3 id="update-statements-modifying-data">UPDATE Statements (Modifying Data)</h3>
        <p>The <code>UPDATE</code> statement modifies existing rows in a table.</p>
        <p><strong>Standard SQL Syntax</strong>:</p>
        <div class="sourceCode" id="cb09" onclick="CopyToClipboard('cb09')">
          <pre
            class="sourceCode sql"><code class="sourceCode sql"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a><span class="kw">UPDATE</span> table_name</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true"></a><span class="kw">SET</span> column1 <span class="op">=</span> value1, </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true"></a>    column2 <span class="op">=</span> value2, <span class="op">..</span>.</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true"></a><span class="kw">WHERE</span> condition; <span class="co">-- CRITICAL: Filters which rows to update</span></span></code></pre>
        </div>
        <p><strong>Important</strong>: <strong>Always use a <code>WHERE</code> clause</strong> unless you intend to
          update
          <em>every single row</em> in the table. Forgetting the <code>WHERE</code> clause is a common and dangerous
          mistake.
        </p>
      </section>
      <section>
        <p><strong>Examples</strong>:</p>
        <div class="sourceCode" id="cb10" onclick="CopyToClipboard('cb10')">
          <pre
            class="sourceCode sql"><code class="sourceCode sql"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a><span class="co">-- Standard SQL: Update a specific customer&#39;s email</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true"></a><span class="kw">UPDATE</span> customers</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true"></a><span class="kw">SET</span> email <span class="op">=</span> <span class="ot">&quot;new.email@example.com&quot;</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true"></a><span class="kw">WHERE</span> customer_id <span class="op">=</span> <span class="dv">123</span>;</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true"></a><span class="co">-- Standard SQL: Increase price for a category of products</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true"></a><span class="kw">UPDATE</span> products</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true"></a><span class="kw">SET</span> price <span class="op">=</span> price <span class="op">*</span> <span class="fl">1.10</span> <span class="co">-- Increase by 10%</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true"></a><span class="kw">WHERE</span> category_id <span class="op">=</span> <span class="dv">5</span>;</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true"></a><span class="co">-- Standard SQL: Update based on current values</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true"></a><span class="kw">UPDATE</span> inventory</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true"></a><span class="kw">SET</span> quantity <span class="op">=</span> quantity <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true"></a><span class="kw">WHERE</span> product_id <span class="op">=</span> <span class="dv">456</span> <span class="kw">AND</span> quantity <span class="op">&gt;</span> <span class="dv">0</span>;</span></code></pre>
        </div>
      </section>
      <section>
        <p><strong>Updating from Another Table (Syntax Varies)</strong>:</p>
        <p>Updating rows in one table based on values from another table is common, but the syntax varies significantly.
        </p>
        <ul>
          <li><strong>PostgreSQL/SQL Server</strong>: Use a <code>FROM</code> clause in the <code>UPDATE</code>
            statement.
            <div class="sourceCode" id="cb11" onclick="CopyToClipboard('cb11')">
              <pre class="sourceCode sql">
<code><span id="cb4-15"><a href="#cb4-15" aria-hidden="true"></a><span class="co"></span>-- PostgreSQL/SQL Server Example: Update product prices based on supplier costs</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true"></a><span class="kw">UPDATE</span> products p     
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true"></a><span class="kw">SET</span> price = s.cost * 1.5     
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true"></a><span class="kw">FROM</span> suppliers s     
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true"></a><span class="kw">WHERE</span> p.supplier_id = s.supplier_id <span class="kw">AND</span> p.category_id = 10;</span></code></pre>
            </div>
          </li>
          <li><strong>Oracle/Db2</strong>: Use a correlated subquery or <code>MERGE</code>.
            <div class="sourceCode" id="cb12" onclick="CopyToClipboard('cb12')">
              <pre class="sourceCode sql">
<code><span id="cb4-17"><a href="#cb4-17" aria-hidden="true"></a><span class="co"></span>-- Oracle Example (Correlated Subquery)</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true"></a><span class="kw">UPDATE</span> products p     
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true"></a><span class="kw">SET</span> price = (SELECT s.cost * 1.5 FROM suppliers s WHERE p.supplier_id = s.supplier_id)     
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true"></a><span class="kw">WHERE</span> p.category_id = 10 <span class="kw">AND EXISTS</span> (SELECT 1 FROM suppliers s WHERE p.supplier_id = s.supplier_id);</span></code></pre>
            </div>
          </li>
          <li><strong>MySQL</strong>: Use a <code>JOIN</code> directly in the <code>UPDATE</code> statement.
            <div class="sourceCode" id="cb13" onclick="CopyToClipboard('cb13')">
              <pre class="sourceCode sql">
<code><span id="cb4-19"><a href="#cb4-19" aria-hidden="true"></a><span class="co"></span>-- MySQL Example</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true"></a><span class="kw">UPDATE</span> products p     
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true"></a><span class="kw">JOIN</span> suppliers s <span class="kw">ON</span> p.supplier_id = s.supplier_id     
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true"></a><span class="kw">SET</span> p.price = s.cost * 1.5     
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true"></a><span class="kw">WHERE</span> p.category_id = 10;</span></code></pre>
            </div>
          </li>
          <li><strong>Standard SQL <code>MERGE</code></strong>: The <code>MERGE</code> statement (covered under UPSERT)
            can also handle updates based on joins.</li>
        </ul>
      </section>
      <section>
        <p><strong>Retrieving Updated Values (Syntax Varies)</strong>: Similar to <code>INSERT</code>, you might want to
          see the values after the update. * <strong>PostgreSQL/Oracle</strong>: <code>RETURNING</code> clause. *
          <strong>SQL Server</strong>: <code>OUTPUT</code> clause. * <strong>MySQL</strong>: Generally requires a
          subsequent <code>SELECT</code>.
        </p>
        <p><strong>Best Practices for <code>UPDATE</code></strong>: 1. <strong>ALWAYS use <code>WHERE</code></strong>
          unless updating all rows is intended. 2. <strong>Test with <code>SELECT</code> first</strong>: Write a
          <code>SELECT</code> query with the same <code>WHERE</code> clause to verify which rows will be affected before
          running the <code>UPDATE</code>. 3. <strong>Use Transactions</strong>: Wrap updates, especially complex ones
          or
          those affecting multiple rows, in a transaction (<code>BEGIN</code>/<code>COMMIT</code>/<code>ROLLBACK</code>)
          for safety. 4. <strong>Consider Performance</strong>: Updates on indexed columns or large tables can be slow.
          Update in batches if necessary.
        </p>
      </section>
      <section>
        <h3 id="delete-statements-removing-data">DELETE Statements (Removing Data)</h3>
        <p>The <code>DELETE</code> statement removes rows from a table.</p>
        <p><strong>Standard SQL Syntax</strong>:</p>
        <div class="sourceCode" id="cb14" onclick="CopyToClipboard('cb14')">
          <pre
            class="sourceCode sql"><code class="sourceCode sql"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true"></a><span class="kw">DELETE</span> <span class="kw">FROM</span> table_name</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true"></a><span class="kw">WHERE</span> condition; <span class="co">-- CRITICAL: Filters which rows to delete</span></span></code></pre>
        </div>
        <p><strong>Important</strong>: Like <code>UPDATE</code>, <strong>always use a <code>WHERE</code> clause</strong>
          unless you intend to delete <em>all</em> rows. Forgetting <code>WHERE</code> in a <code>DELETE</code>
          statement
          is extremely dangerous.</p>
        <p><strong>Examples</strong>:</p>
        <div class="sourceCode" id="cb15" onclick="CopyToClipboard('cb15')">
          <pre
            class="sourceCode sql"><code class="sourceCode sql"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true"></a><span class="co">-- Standard SQL: Delete a specific order</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true"></a><span class="kw">DELETE</span> <span class="kw">FROM</span> orders</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true"></a><span class="kw">WHERE</span> order_id <span class="op">=</span> <span class="dv">9876</span>;</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true"></a><span class="co">-- Standard SQL: Delete inactive users who haven&#39;t logged in for a year</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true"></a><span class="kw">DELETE</span> <span class="kw">FROM</span> users</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true"></a><span class="kw">WHERE</span> status <span class="op">=</span> <span class="ot">&quot;inactive&quot;</span> </span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true"></a><span class="kw">AND</span> last_login_date <span class="op">&lt;</span> <span class="fu">CURRENT_DATE</span> <span class="op">-</span> <span class="dt">INTERVAL</span> <span class="ot">&quot;1&quot;</span> <span class="dt">YEAR</span>; <span class="co">-- Interval syntax may vary</span></span></code></pre>
        </div>
      </section>
      <section>
        <p><strong>Deleting Based on Other Tables (Syntax Varies)</strong>: Similar to <code>UPDATE</code>, deleting
          rows
          based on joins requires different syntax. * <strong>PostgreSQL/SQL Server</strong>: Use a <code>USING</code>
          (PostgreSQL) or <code>FROM</code> (SQL Server) clause.
        <div class="sourceCode" id="cb16" onclick="CopyToClipboard('cb16')">
          <pre class="sourceCode sql">
<code><span id="cb6-9"><a href="#cb6-9" aria-hidden="true"></a><span class="co"></span>-- PostgreSQL Example: Delete orders from customers marked as 'bad_debt'</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true"></a><span class="kw">DELETE</span> <span class="kw">FROM</span> orders o     
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true"></a><span class="kw">USING</span> customers c     
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true"></a><span class="kw">WHERE</span> o.customer_id = c.customer_id <span class="kw">AND</span> c.status = "bad_debt";</span></code></pre>
        </div>
        * <strong>Oracle/Db2/MySQL</strong>: Often use subqueries with <code>IN</code> or <code>EXISTS</code>.
        <div class="sourceCode" id="cb17" onclick="CopyToClipboard('cb17')">
          <pre class="sourceCode sql">
<code><span id="cb6-12"><a href="#cb6-12" aria-hidden="true"></a><span class="co"></span>-- Example (Subquery): Delete orders from customers marked as 'bad_debt'</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true"></a><span class="kw">DELETE</span> <span class="kw">FROM</span> orders    
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true"></a><span class="kw">WHERE</span> customer_id IN (<span class="kw">SELECT</span> customer_id <span class="kw">FROM</span> customers <span class="kw">WHERE</span> status = "bad_debt");</span></code></pre>
        </div>
        </p>
        <p><strong>Retrieving Deleted Values (Syntax Varies)</strong>: * <strong>PostgreSQL/Oracle</strong>:
          <code>RETURNING</code> clause. * <strong>SQL Server</strong>: <code>OUTPUT</code> clause. *
          <strong>MySQL</strong>: Not directly supported.
        </p>
      </section>
      <section>
        <h3 id="truncate-table-removing-all-data-quickly">TRUNCATE TABLE (Removing All Data Quickly)</h3>
        <p>The <code>TRUNCATE TABLE</code> statement removes <em>all</em> rows from a table very quickly. It’s typically
          much faster than <code>DELETE FROM table_name;</code> because it often bypasses individual row deletion
          mechanisms.</p>
        <p><strong>Standard SQL Syntax</strong>:</p>
        <div class="sourceCode" id="cb18" onclick="CopyToClipboard('cb18')">
          <pre
            class="sourceCode sql"><code class="sourceCode sql"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true"></a><span class="kw">TRUNCATE</span> <span class="kw">TABLE</span> table_name; </span></code></pre>
        </div>
        <p><strong>Key Differences: <code>DELETE</code> vs. <code>TRUNCATE</code></strong>:</p>
        <table>
          <colgroup>
            <col style="width: 24%" />
            <col style="width: 37%" />
            <col style="width: 37%" />
          </colgroup>
          <thead>
            <tr class="header">
              <th style="text-align: left;">Feature</th>
              <th style="text-align: left;"><code>DELETE FROM table WHERE ...</code></th>
              <th style="text-align: left;"><code>TRUNCATE TABLE table</code></th>
            </tr>
          </thead>
          <tbody>
            <tr class="odd">
              <td style="text-align: left;"><strong>Speed</strong></td>
              <td style="text-align: left;">Slower (scans/logs rows)</td>
              <td style="text-align: left;">Much Faster (often deallocates)</td>
            </tr>
            <tr class="even">
              <td style="text-align: left;"><strong><code>WHERE</code> Clause</strong></td>
              <td style="text-align: left;">Yes</td>
              <td style="text-align: left;">No (Always removes all rows)</td>
            </tr>
            <tr class="odd">
              <td style="text-align: left;"><strong>Transaction Log</strong></td>
              <td style="text-align: left;">Logs each deleted row</td>
              <td style="text-align: left;">Minimal logging (usually)</td>
            </tr>
            <tr class="even">
              <td style="text-align: left;"><strong>Triggers</strong></td>
              <td style="text-align: left;">Fires <code>DELETE</code> triggers</td>
              <td style="text-align: left;">Usually does <em>not</em> fire triggers</td>
            </tr>
            <tr class="odd">
              <td style="text-align: left;"><strong>Return Value</strong></td>
              <td style="text-align: left;">Can return deleted rows</td>
              <td style="text-align: left;">No</td>
            </tr>
            <tr class="even">
              <td style="text-align: left;"><strong>Permissions</strong></td>
              <td style="text-align: left;"><code>DELETE</code> permission needed</td>
              <td style="text-align: left;">Often requires higher privileges (<code>TRUNCATE</code>, <code>ALTER</code>,
                <code>DROP</code>)
              </td>
            </tr>
            <tr class="odd">
              <td style="text-align: left;"><strong>Reset Identity</strong></td>
              <td style="text-align: left;">No</td>
              <td style="text-align: left;">Often resets auto-increment counters (e.g., <code>RESTART IDENTITY</code>
                option in PostgreSQL)</td>
            </tr>
            <tr class="even">
              <td style="text-align: left;"><strong>Foreign Keys</strong></td>
              <td style="text-align: left;">Standard checks apply</td>
              <td style="text-align: left;">May fail if referenced by FKs, unless <code>CASCADE</code> is used
                (dangerous!)</td>
            </tr>
          </tbody>
        </table>
        <p><strong>Use Cases</strong>: <code>TRUNCATE</code> is primarily used for quickly clearing temporary or staging
          tables before loading new data. Use <code>DELETE</code> when you need conditional removal, triggers to fire,
          or
          row-level logging.</p>
      </section>
      <section>
        <h3 id="transaction-management-standard-sql">Transaction Management (Standard SQL)</h3>
        <p>Transactions ensure that a series of SQL operations are treated as a single, atomic unit of work. Either all
          operations within the transaction succeed and are made permanent (<code>COMMIT</code>), or none of them are
          (<code>ROLLBACK</code>). This guarantees the <strong>ACID</strong> properties (Atomicity, Consistency,
          Isolation, Durability).</p>
        <p><strong>Standard SQL Commands</strong>:</p>
        <ol type="1">
          <li><strong><code>BEGIN TRANSACTION</code></strong> (or often just <code>BEGIN</code>): Starts a new
            transaction.</li>
          <li><strong><code>COMMIT</code></strong>: Makes all changes performed since <code>BEGIN</code> permanent and
            ends the transaction.</li>
          <li><strong><code>ROLLBACK</code></strong>: Discards all changes made since <code>BEGIN</code> and ends the
            transaction.</li>
          <li><strong><code>SAVEPOINT savepoint_name</code></strong>: Creates a named point within a transaction.</li>
          <li><strong><code>ROLLBACK TO SAVEPOINT savepoint_name</code></strong>: Discards changes made after the
            specified savepoint, but keeps the transaction active.</li>
        </ol>
      </section>
      <section>
        <p><strong>Example</strong>: Transferring funds between accounts (must happen atomically).</p>
        <div class="sourceCode" id="cb19" onclick="CopyToClipboard('cb19')">
          <pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true"></a><span class="cf">BEGIN</span> <span class="kw">TRANSACTION</span>;</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true"></a><span class="co">-- Subtract amount from Account A</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true"></a><span class="kw">UPDATE</span> accounts</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true"></a><span class="kw">SET</span> balance <span class="op">=</span> balance <span class="op">-</span> <span class="fl">100.00</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true"></a><span class="kw">WHERE</span> account_id <span class="op">=</span> <span class="ot">&quot;A123&quot;</span>;</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true"></a></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true"></a><span class="co">-- Add amount to Account B</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true"></a><span class="kw">UPDATE</span> accounts</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true"></a><span class="kw">SET</span> balance <span class="op">=</span> balance <span class="op">+</span> <span class="fl">100.00</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true"></a><span class="kw">WHERE</span> account_id <span class="op">=</span> <span class="ot">&quot;B456&quot;</span>;</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true"></a></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true"></a><span class="co">-- Check for errors or conditions here...</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true"></a></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true"></a><span class="co">-- If everything is okay, make it permanent</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true"></a><span class="kw">COMMIT</span>;</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true"></a></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true"></a><span class="co">-- If something went wrong (e.g., insufficient funds detected before commit),</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true"></a><span class="co">-- discard all changes:</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true"></a><span class="co">-- ROLLBACK;</span></span></code></pre>
        </div>
        <p><strong>Auto-Commit</strong>: By default, many SQL tools and database connections operate in “auto-commit”
          mode, where each individual SQL statement is treated as its own transaction. To perform multi-statement
          transactions, you usually need to explicitly start one with <code>BEGIN</code>.</p>
        <p><strong>Isolation Levels</strong>: Standard SQL defines isolation levels (<code>READ UNCOMMITTED</code>,
          <code>READ COMMITTED</code>, <code>REPEATABLE READ</code>, <code>SERIALIZABLE</code>) that control how
          transactions interact with each other regarding visibility of changes. <code>READ COMMITTED</code> is the most
          common default.
        </p>
      </section>
      <section>
        <h3 id="upsert-operations-insert-or-update">UPSERT Operations (INSERT or UPDATE)</h3>
        <p>“UPSERT” is the concept of inserting a row if it doesn’t exist, or updating it if it does, based on a key
          conflict. The standard SQL way is <code>MERGE</code>, but specific databases have their own syntax.</p>
        <p><strong>Standard SQL <code>MERGE</code> Statement</strong>:</p>
        <p>The <code>MERGE</code> statement provides a standard way to perform conditional inserts, updates, or deletes
          based on matching data between a source and a target table. It’s powerful but can be complex.</p>
        <div class="sourceCode" id="cb20" onclick="CopyToClipboard('cb20')">
          <pre
            class="sourceCode sql"><code class="sourceCode sql"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true"></a><span class="co">-- Standard MERGE Syntax (Conceptual)</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true"></a><span class="kw">MERGE</span> <span class="kw">INTO</span> target_table <span class="kw">AS</span> T</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true"></a><span class="kw">USING</span> source_table <span class="kw">AS</span> S</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true"></a><span class="kw">ON</span> (T.match_column <span class="op">=</span> S.match_column)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true"></a><span class="cf">WHEN</span> MATCHED <span class="cf">THEN</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true"></a>    <span class="kw">UPDATE</span> <span class="kw">SET</span> T.column1 <span class="op">=</span> S.value1, T.column2 <span class="op">=</span> S.value2</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true"></a><span class="cf">WHEN</span> <span class="kw">NOT</span> MATCHED <span class="cf">THEN</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true"></a>    <span class="kw">INSERT</span> (column1, column2, match_column)</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true"></a>    <span class="kw">VALUES</span> (S.value1, S.value2, S.match_column);</span></code></pre>
        </div>
        <ul>
          <li>Support and exact syntax details for <code>MERGE</code> vary across databases (supported well by Oracle,
            SQL
            Server, Db2; PostgreSQL added it more recently).</li>
        </ul>
      </section>
      <section>
        <p><strong>Vendor-Specific UPSERT Syntax</strong>:</p>
        <ul>
          <li><strong>PostgreSQL</strong>: <code>INSERT ... ON CONFLICT ... DO UPDATE SET ...</code> or
            <code>DO NOTHING</code>.
            <div class="sourceCode" id="cb21" onclick="CopyToClipboard('cb21')">
              <pre class="sourceCode sql">
<code><span id="cb10-1"><a href="#cb10-1" aria-hidden="true"></a><span class="co">-- PostgreSQL Example: Insert or update product inventory count</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> product_inventory (product_id, quantity)     
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true"></a><span class="kw">VALUES</span> (101, 10)     
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true"></a><span class="kw">ON</span> CONFLICT (product_id)     
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true"></a>    <span class="kw">DO</span> <span class="kw">UPDATE</span> <span class="kw">SET</span> quantity = product_inventory.quantity + EXCLUDED.quantity;</span></code></pre>
            </div>
          </li>
          <li><strong>MySQL</strong>: <code>INSERT ... ON DUPLICATE KEY UPDATE ...</code>.
            <div class="sourceCode" id="cb22" onclick="CopyToClipboard('cb22')">
              <pre class="sourceCode sql">
<code><span id="cb10-6"><a href="#cb10-6" aria-hidden="true"></a><span class="co">-- MySQL Example: Insert or update product inventory count</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> product_inventory (product_id, quantity)     
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true"></a><span class="kw">VALUES</span> (101, 10)     
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true"></a><span class="kw">ON</span> DUPLICATE KEY UPDATE quantity = quantity + VALUES(quantity);</span></code></pre>
            </div>
          </li>
          <li><strong>SQLite</strong>: <code>INSERT ... ON CONFLICT ... DO UPDATE SET ...</code> (similar to
            PostgreSQL).
            <div class="sourceCode" id="cb23" onclick="CopyToClipboard('cb23')">
              <pre class="sourceCode sql">
<code><span id="cb10-10"><a href="#cb10-10" aria-hidden="true"></a><span class="co">-- SQLite Example: Insert or update product inventory count</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> product_inventory (product_id, quantity)     
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true"></a><span class="kw">VALUES</span> (101, 10)     
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true"></a><span class="kw">ON</span> CONFLICT (product_id)     
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true"></a>    <span class="kw">DO</span> <span class="kw">UPDATE</span> <span class="kw">SET</span> quantity = product_inventory.quantity + EXCLUDED.quantity;</span></code></pre>
            </div>
          </li>
        </ul>
        <p><strong>Use Cases</strong>: UPSERT/MERGE is very useful for data synchronization, loading data from external
          sources, updating counters, or maintaining configuration tables.</p>
        <p>Understanding these DML (Data Manipulation Language) statements and transaction control is fundamental for
          building applications that interact reliably with databases.</p>
      </section>
    </div>
  </div>
</body>
</div>
</div> <!-- /container -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity=<script
  src="../static/script.js"></script>

<script src="../static/script.js"></script>

</html>